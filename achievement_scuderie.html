<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Achievement ‚Äì Scuderie</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: #080a0f;
    --panel: #0e1220;
    --muted: #95a3bd;
    --text: #e9f0ff;
    --accent: #67b0ff;
    --accent-2: #ff2d87;
    --ring: 0 0 0 3px rgba(103,176,255,.35);
    --comune: #2cff88;
    --raro: #4f8cff;
    --epico: #b65cff;
    --leggendario: #ffb020;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;background:radial-gradient(1200px 600px at 80% -10%, rgba(255,45,135,.15), transparent 60%), radial-gradient(900px 500px at 10% -20%, rgba(103,176,255,.18), transparent 60%), var(--bg);color:var(--text)}
  .container{max-width:1100px;margin-inline:auto;padding:24px}
  header{position:relative;border-radius:22px;padding:28px;background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.0)), var(--panel);box-shadow:0 10px 30px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.03);overflow:hidden;border:2px solid transparent;background-clip:padding-box;border-radius:24px}
  header::after{content:'';position:absolute;inset:-2px;border-radius:24px;padding:2px;background:conic-gradient(from 180deg, var(--accent), var(--accent-2), var(--epico), var(--leggendario), var(--accent));-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite: xor;mask-composite: exclude;}
  h1{margin:0;font-size:clamp(22px,2.6vw,30px);font-weight:900;letter-spacing:.3px;text-transform:uppercase;text-shadow:0 3px 0 rgba(0,0,0,.35)}
  .subtitle{color:var(--muted);margin-top:8px}
  nav.tabs{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}
  .tab-btn{appearance:none;border:2px solid rgba(255,255,255,.12);background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:800;text-transform:uppercase;letter-spacing:.4px}
  .tab-btn[aria-pressed="true"]{background:linear-gradient(180deg, rgba(103,176,255,.25), rgba(103,176,255,.08));box-shadow:0 0 0 3px rgba(103,176,255,.15)}
  .hud{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
  .chip{display:inline-flex;align-items:center;gap:8px;border:2px solid rgba(255,255,255,.12);padding:10px 12px;border-radius:12px;background:rgba(8,10,15,.6);backdrop-filter:blur(6px);font-size:12px;color:var(--muted);text-transform:uppercase}
  .levels{margin-top:18px;padding:14px;border:2px solid rgba(255,255,255,.12);border-radius:14px;background:rgba(255,255,255,.02)}
  .levels h4{margin:0 0 10px 0;text-transform:uppercase;letter-spacing:.4px}
  .levels .list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:8px;font-size:12px;color:var(--muted)}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-top:20px}
  .card{position:relative;background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));border:2px solid rgba(255,255,255,.12);border-radius:18px;padding:16px 14px 52px 14px;transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;overflow:hidden}
  .card::before{content:'';position:absolute;inset:-2px;z-index:0;border-radius:18px;background:radial-gradient(400px 120px at 50% -10%, rgba(255,255,255,.18), transparent 60%);opacity:.4;pointer-events:none}
  .card:hover{transform:translateY(-3px);border-color:rgba(255,255,255,.22);box-shadow:0 10px 30px rgba(0,0,0,.45)}
  .frame{position:absolute;inset:-2px;border-radius:18px;padding:2px;background:var(--frame, transparent);-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}
  .rarity{position:relative;z-index:1;display:flex;align-items:center;gap:8px;margin-bottom:10px;font-size:12px;color:var(--muted);text-transform:uppercase}
  .dot{width:10px;height:10px;border-radius:2px}
  .dot.comune{background:var(--comune)}
  .dot.raro{background:var(--raro)}
  .dot.epico{background:var(--epico)}
  .dot.leggendario{background:var(--leggendario)}
  .ach-title{position:relative;z-index:1;font-weight:900;line-height:1.25;margin:0 0 4px 0;text-transform:uppercase;letter-spacing:.4px}
  .meta{position:relative;z-index:1;font-size:12px;color:var(--muted)}
  .xp-pill{position:absolute;right:10px;top:10px;z-index:2;display:inline-flex;align-items:center;gap:6px;font-size:12px;font-weight:800;color:#06120b;background:linear-gradient(180deg, rgba(44,255,136,.9), rgba(44,255,136,.7));padding:6px 10px;border-radius:999px;box-shadow:0 6px 18px rgba(44,255,136,.35)}
  .toggle{position:absolute;right:10px;bottom:10px;z-index:2;appearance:none;border:2px solid rgba(255,255,255,.14);background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer;font-size:11px;font-weight:800;text-transform:uppercase}
  .toggle:focus{outline:none;box-shadow:var(--ring)}
  .card.unlocked{border-color:rgba(255,255,255,.35);box-shadow:0 0 0 2px rgba(255,255,255,.1), 0 20px 40px rgba(0,0,0,.5)}
  .card.unlocked::after{content:'‚úî Sbloccato';position:absolute;left:0;top:0;transform:translate(10px,10px) rotate(-2deg);background:linear-gradient(180deg, rgba(44,255,136,.9), rgba(44,255,136,.6));color:#06120b;font-weight:900;padding:6px 10px;border-radius:8px;box-shadow:0 6px 20px rgba(44,255,136,.35);font-size:11px;z-index:2}
  .card[data-rarity="comune"]{--frame: conic-gradient(from 180deg, rgba(44,255,136,.7), rgba(44,255,136,.15), transparent 40%)}
  .card[data-rarity="raro"]{--frame: conic-gradient(from 180deg, rgba(79,140,255,.7), rgba(79,140,255,.15), transparent 40%)}
  .card[data-rarity="epico"]{--frame: conic-gradient(from 180deg, rgba(182,92,255,.8), rgba(182,92,255,.15), transparent 40%)}
  .card[data-rarity="leggendario"]{--frame: conic-gradient(from 180deg, rgba(255,176,32,.9), rgba(255,176,32,.2), transparent 40%)}
  footer{opacity:.75;text-align:center;font-size:12px;margin:26px 0}
.hidden{display:none !important}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>üèéÔ∏è Achievement Scuderie</h1>
    <p class="subtitle">Stesse funzioni di <b>achievement_tracker</b>, con la tua lista originale delle scuderie.</p>
    <nav aria-label="Filtri difficolt√†" class="tabs">
      <button type="button" class="tab-btn" aria-pressed="true" data-filter="all">Tutti</button>
      <button type="button" class="tab-btn" data-filter="comune">Comuni <span class="count" data-for="comune">(0)</span></button>
      <button type="button" class="tab-btn" data-filter="raro">Rari <span class="count" data-for="raro">(0)</span></button>
      <button type="button" class="tab-btn" data-filter="epico">Epici <span class="count" data-for="epico">(0)</span></button>
      <button type="button" class="tab-btn" data-filter="leggendario">Leggendari <span class="count" data-for="leggendario">(0)</span></button>
    </nav>
    <div class="hud" aria-label="Stato progressi">
      <div class="chip">Comuni: <strong id="prog-comune">0/0</strong></div>
      <div class="chip">Rari: <strong id="prog-raro">0/0</strong></div>
      <div class="chip">Epici: <strong id="prog-epico">0/0</strong></div>
      <div class="chip">Leggendari: <strong id="prog-leggendario">0/0</strong></div>
      <div class="chip">Totale: <strong id="prog-total">0/0</strong></div>
      <div class="chip">XP sbloccata: <strong id="xp-total">0</strong></div>
    </div>
    <section class="levels" id="levels">
      <h4>XP necessaria per salire di livello</h4>
      <div class="list" id="level-list"></div>
    </section>
  </header>

  <section class="grid" id="achievements">

  <!-- COMUNI -->
    <article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Affidabilit√† c'√®</h3>
    <p class="meta">Finisci una gara con entrambe le macchine</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Vincere una gara</h3>
    <p class="meta">Tagliare il traguardo per primi con la propria scuderia.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Salvarsi</h3>
    <p class="meta">Mantenere la categoria ed evitare la retrocessione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Prima volta a punti</h3>
    <p class="meta">La scuderia conquista i primi punti della stagione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Strutture d'allenamento</h3>
    <p class="meta">Entrambi i piloti aumentano di livello durante la stagione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Entrambe le auto a punti</h3>
    <p class="meta">Tutti i piloti della scuderia chiudono in zona punti.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Fedele come un cane</h3>
    <p class="meta">Avere almeno un pilota per tutte le gare della stagione</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
        <article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Scuderia bidone</h3>
    <p class="meta">Non arrivare tra i primi 10 per due gare consecutive.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Prima pole della scuderia</h3>
    <p class="meta">Uno dei piloti conquista la prima pole stagionale per la squadra.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Cocco di mamma</h3>
    <p class="meta">Avere almeno un pilota fisso per tutte le gare della stagione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="comune">
        <div class="rarity"><span class="dot comune"></span>Comune</div>
    <h3 class="ach-title">Capo del capo della scuderia</h3>
    <p class="meta">Uno dei due piloti possiede una scuderia eccetto la tua</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
  <!-- RARI -->
<article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Vincere campionato costruttori</h3>
    <p class="meta">Trionfare nel campionato costruttori.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Spazio ai giovani o ai bidoni</h3>
    <p class="meta">In F1 fai guidare un 80.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Essere promossi</h3>
    <p class="meta">Salire di categoria come scuderia.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Squadra che vince non si cambia</h3>
    <p class="meta">Avete gli stessi due piloti per tutte gare della stagione</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Podio costruttori</h3>
    <p class="meta">Chiudere il campionato tra le prime 3 scuderie.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Quintipletta di punti</h3>
    <p class="meta">Entrambe le auto sempre in zona punti per 5 gare di fila (prime 10 posizioni).</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Prima lei ingeniere.</h3>
    <p class="meta">Impostare aggressivata a 1 per i piloti e vincere la gara.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Punto sui giovani</h3>
    <p class="meta">Utilizza un pilota che inizia da 80 per tutte le gare f3 o f2.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
      <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Scarsi ma buoni</h3>
    <p class="meta">Salvati in f1 o f2 con piloti max 81 di abilit√†.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Scansatevi tutti!</h3>
    <p class="meta">Impostare aggressivata a 100 per i piloti e vincere la gara.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Per un pelo!</h3>
    <p class="meta">Salvarsi all'ultima gara in zona retrocessioni.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Titolari fissi</h3>
    <p class="meta">Avere gli stessi due piloti per tutte gare della stagione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Affidabilit√† 100%</h3>
    <p class="meta">Finire una gara lunga con entrambi i piloti.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Come ha fatto?</h3>
    <p class="meta">Il tuo pilota di 80 di abilit√† vince una gara di f2</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Neo-salvatore</h3>
    <p class="meta">Da neo promossa salvarsi e non retrocedere.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">E allora faccio da solo!</h3>
    <p class="meta">Crea da solo la tua livrea.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Gli altri fanno pi√π schifo</h3>
    <p class="meta">Mai al podio ma la tua scuderia si salva.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
        <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Momento no</h3>
    <p class="meta">Non arrivare tra i primi 10 con entrambe le macchine per 2 gare consecutive.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
          <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Capi scuderia ovunque</h3>
    <p class="meta">Entrambi i piloti posseggono una scuderia eccetto la tua.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
     <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Il popolo ha votato</h3>
    <p class="meta">Uno dei tuoi piloti √® MVP.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
     <article class="card" data-rarity="raro">
        <div class="rarity"><span class="dot raro"></span>Raro</div>
    <h3 class="ach-title">Macchini efficienti</h3>
    <p class="meta">Le due macchine partono entrambe dopo i primi 10 ma arrivano entrambe nei primi 10 o al podio.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
  <!-- EPICI -->
<article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Doppietta della scuderia</h3>
    <p class="meta">Concludere la gara con due piloti della scuderia al primo e secondo posto.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Che inizio!</h3>
    <p class="meta">Vinci al debutto con la nuova scuderia.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
        <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Che promozione!</h3>
    <p class="meta">Vinci al debutto nella nuova categoria.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Gi√† in vacanza</h3>
    <p class="meta">Vincere il mondiale costruttori con una giornata d'anticipo.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Io punto solo sui giovani</h3>
    <p class="meta">In F1 fai guidare 2 pilot di 80.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Quote a sfavore</h3>
    <p class="meta">Vinci il campionato costruttori o piloti da sfavorito.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Viva le pazze regole</h3>
    <p class="meta">Vinci il campionato costruttori grazie ai doppi punti.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
     <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Underdogghino</h3>
    <p class="meta">Da neo promossa ottieni la promozione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Tutta strategia</h3>
    <p class="meta">Il tuo pilota 80 vince una gara in F1.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
     <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Underdog</h3>
    <p class="meta">Da neo promossa vinci il campionato costruttori.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
      <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Viva le pazze regole per gli scarsi</h3>
    <p class="meta">Salvati grazie ai doppi punti.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Zero ritiri in stagione</h3>
    <p class="meta">Nessun pilota della scuderia si ritira in tutto il campionato.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Una delle auto butta fuori il compagno di squadra</h3>
    <p class="meta">Incidente tra compagni causato da uno dei due.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Infermabili</h3>
    <p class="meta">Entrambi i piloti a podio per 2 gare di fila</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Una delle due auto doppia il compagno di squadra</h3>
    <p class="meta">Un pilota della scuderia doppia il proprio teammate.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">NO CAP!</h3>
    <p class="meta">Non utilizzare il Cap in tutta la stagione in nessuna categoria.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Campioni all'ultimo!</h3>
    <p class="meta">Vincere all'ultima gara il mondiale costruttori da secondo</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
     <article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">A casa nostra!</h3>
    <p class="meta">Vinco la gara di casa della scuderia.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="epico">
        <div class="rarity"><span class="dot epico"></span>Epico</div>
    <h3 class="ach-title">Senza meriti</h3>
    <p class="meta">Salvati solo perche si √® sciolta una scuderia.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
  <!-- LEGGENDARI -->
<article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Vincere 2 volte consecutivamente il campionato costruttori</h3>
    <p class="meta">Back-to-back da leggenda per la scuderia.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Soli e vincenti</h3>
    <p class="meta">Rimane in pista solo la tua scuderia </p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Zero ritiri da parte di entrambe le macchine</h3>
    <p class="meta">Tutte le gare completate senza ritiri da nessuna auto.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Sempre tra i primi 10 in ogni gara per entrambe le macchine</h3>
    <p class="meta">Entrambe le auto sempre in top 10 per tutta la stagione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Le due auto si scontrano tra loro e si ritirano</h3>
    <p class="meta">Entrambe le auto della scuderia out per incidente tra compagni.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Dominio in qualifica</h3>
    <p class="meta">Entrambe le auto in prima fila (P1 e P2 in qualifica).</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Week end gi√† finito</h3>
    <p class="meta">Entrambe le macchine escono alla prima curva</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Stagione perfetta</h3>
    <p class="meta">Almeno una vittoria in ogni gara della stagione.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
     <article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Si sono invertiti i ruoli</h3>
    <p class="meta">Da doppiato supera una macchina che ti ha doppiato.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
    <article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Clamorosa ultima gara!</h3>
    <p class="meta">Vincere all'ultima gara il mondiale costruttori da terzi o peggio.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
<article class="card" data-rarity="leggendario">
        <div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
    <h3 class="ach-title">Scuderia imbattibile</h3>
    <p class="meta">Vincere sia il campionato costruttori che quello piloti nello stesso anno, per due anni consecutivi.</p>
    <button class="toggle" type="button">Sblocca</button>
  </article>
  </section>



  <footer>Stato salvato nel browser (LocalStorage).</footer>
</div>

<script>
  const XP_REWARD = { comune: 60, raro: 150, epico: 350, leggendario: 600 };
  const xpToNext = (L)=>{ const d=L-80; return 400 + 20*d + 6*d*d; };

  const buttons = document.querySelectorAll('.tab-btn');
  let cards = [...document.querySelectorAll('.card')];
  function applyFilter(f){
    // refresh list in case DOM changes
    cards = [...document.querySelectorAll('.card')];
    for(const c of cards){
      const r = (c.dataset.rarity||'').toLowerCase().trim();
      if(f==='all' || r===f){ c.style.display=''; c.hidden=false; }
      else { c.style.display='none'; c.hidden=true; }
    }
  }
  const counts = {
    comune: document.querySelector('#prog-comune'),
    raro: document.querySelector('#prog-raro'),
    epico: document.querySelector('#prog-epico'),
    leggendario: document.querySelector('#prog-leggendario'),
    total: document.querySelector('#prog-total'),
    xptotal: document.querySelector('#xp-total')
  };

  // decorate cards
  cards.forEach(c=>{
    if (!c.querySelector('.frame')){
      const f = document.createElement('div'); f.className='frame'; f.setAttribute('aria-hidden','true'); c.prepend(f);
    }
    const r = c.dataset.rarity; c.dataset.xp = XP_REWARD[r] || 0;
    if (!c.querySelector('.xp-pill')){
      const pill = document.createElement('span'); pill.className='xp-pill'; pill.textContent = `+${c.dataset.xp} XP`; c.appendChild(pill);
    }
    if (!c.querySelector('.toggle')){
      const b = document.createElement('button'); b.className='toggle'; b.type='button'; b.textContent='Sblocca'; b.setAttribute('aria-label','Segna come sbloccato'); c.appendChild(b);
    }
  });

  const storageKey = 'ach_scuderie_unlocked_v1';
  const saved = JSON.parse(localStorage.getItem(storageKey) || '{}');

  function makeKey(card){
    const t = (card.querySelector('.ach-title')?.textContent || '').trim().toLowerCase();
    return t.replace(/[^a-z0-9]+/g,'-');
  }

  cards.forEach((c)=>{
    const key = makeKey(c);
    c.dataset.key = key;
    if (saved[key]) c.classList.add('unlocked');
    const btn = c.querySelector('.toggle');
    if (btn && saved[key]) btn.textContent = 'Blocca';
  });

  function updateCounters(){
    const rarities = ['comune','raro','epico','leggendario'];
    let totalUnlocked = 0; let total = cards.length; let xpUnlocked = 0;
    rarities.forEach(r=>{
      const list = cards.filter(c=>c.dataset.rarity===r);
      const unlocked = list.filter(c=>c.classList.contains('unlocked'));
      const span = document.querySelector(`.count[data-for="${r}"]`);
      if (span) span.textContent = `(${list.length})`;
      counts[r].textContent = `${unlocked.length}/${list.length}`;
      totalUnlocked += unlocked.length;
      xpUnlocked += unlocked.reduce((s,c)=> s + Number(c.dataset.xp||0), 0);
    });
    counts.total.textContent = `${totalUnlocked}/${total}`;
    counts.xptotal.textContent = xpUnlocked;
  }
  updateCounters();
  applyFilter('all');

  buttons.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      buttons.forEach(b=>b.setAttribute('aria-pressed','false'));
      btn.setAttribute('aria-pressed','true');
      const f = btn.dataset.filter;
      applyFilter(f);
    });
  });

  document.addEventListener('click', (e)=>{
    const t = e.target;
    if (t.matches('.toggle')){
      const card = t.closest('.card');
      const key = card.dataset.key || makeKey(card);
      card.classList.toggle('unlocked');
      const isOn = card.classList.contains('unlocked');
      saved[key] = isOn;
      localStorage.setItem(storageKey, JSON.stringify(saved));
      t.textContent = isOn ? 'Blocca' : 'Sblocca';
      updateCounters();
  applyFilter('all');
    }
  });

  const levelList = document.querySelector('#level-list');
  if (levelList){
    let frag = document.createDocumentFragment();
    for (let L=80; L<100; L++){
      const li = document.createElement('div');
      li.textContent = `L${L} ‚Üí L${L+1}: ${xpToNext(L)} XP`;
      frag.appendChild(li);
    }
    levelList.appendChild(frag);
  }
</script>
</body>
</html>
