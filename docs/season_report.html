<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Report stagione â€¢ Game Pass</title>
  <link rel="stylesheet" href="./styles.css" />
  <style>
    :root{
      --bg0:#070815; --bg1:#0A0E24;
      --stroke: rgba(255,255,255,.10);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --faint: rgba(255,255,255,.52);
      --cyan:#28d7ff; --violet:#7c3aed; --pink:#ff2bd6; --gold:#fbbf24; --green:#22c55e;
      --r: 22px; --r2: 18px;
      --shadow: 0 34px 90px rgba(0,0,0,.60);
      --shadow2: 0 18px 40px rgba(0,0,0,.40);
      --maxw: 1220px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; color:var(--txt);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 700px at 12% -10%, rgba(40,215,255,.18), transparent 55%),
        radial-gradient(1100px 650px at 95% 0%, rgba(124,58,237,.22), transparent 58%),
        radial-gradient(900px 650px at 55% 25%, rgba(255,43,214,.12), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
      min-height:100vh;
    }
    .topbar{
      position:sticky; top:0; z-index:50;
      background: rgba(6,8,18,.62);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--stroke);
    }
    .topbar-inner{
      max-width:var(--maxw); margin:0 auto;
      padding: 14px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{ display:flex; align-items:center; gap:12px; }
    .logo{
      width:40px; height:40px; border-radius: 14px;
      background:
        radial-gradient(18px 18px at 30% 28%, rgba(255,255,255,.32), transparent 60%),
        linear-gradient(135deg, rgba(40,215,255,.95), rgba(124,58,237,.85));
      box-shadow: 0 18px 40px rgba(40,215,255,.18);
      display:flex; align-items:center; justify-content:center;
      border: 1px solid rgba(255,255,255,.16);
    }
    .logo span{ font-size:18px; filter: drop-shadow(0 10px 14px rgba(0,0,0,.35)); }
    h1{ margin:0; font-size:18px; letter-spacing:.3px; }
    .sub{ margin-top:2px; font-size:12px; color:var(--muted); }
    .brand-text{ display:flex; flex-direction:column; }

    .actions{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
    #userInfo{ color:var(--muted); font-size:12px; max-width:360px; overflow:hidden; text-overflow: ellipsis; }
    .btnx{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:var(--txt);
      padding: 10px 14px;
      border-radius: 14px;
      font-weight: 850;
      letter-spacing: .18px;
      cursor:pointer;
      box-shadow: 0 16px 34px rgba(0,0,0,.40),
                  inset 0 1px 0 rgba(255,255,255,.14),
                  inset 0 -14px 20px rgba(0,0,0,.16);
    }
    .btnx.primary{
      background: linear-gradient(135deg, rgba(40,215,255,.45), rgba(124,58,237,.45));
      box-shadow: 0 22px 52px rgba(40,215,255,.14),
                  0 18px 44px rgba(124,58,237,.12),
                  inset 0 1px 0 rgba(255,255,255,.16),
                  inset 0 -16px 22px rgba(0,0,0,.16);
      border: 1px solid rgba(255,255,255,.18);
    }
    .btnx:disabled{ opacity:.55; cursor:not-allowed; }

    .wrap{ max-width:var(--maxw); margin:0 auto; padding: 16px 16px 90px; }

    #status{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      color: var(--muted);
      font-size: 12.5px;
    }

    .stats{
      margin-top: 14px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }
    .stat{
      border-radius: var(--r2);
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(8,12,28,.45);
      box-shadow: var(--shadow2);
      padding: 14px;
      position:relative;
      overflow:hidden;
    }
    .stat::after{
      content:""; position:absolute; inset:0;
      background: radial-gradient(900px 480px at 50% 0%, rgba(255,255,255,.10), transparent 60%);
      opacity:.8; pointer-events:none; mix-blend-mode: overlay;
    }
    .stat .lab{ font-size: 11px; color: var(--muted); letter-spacing:.32px; text-transform: uppercase; }
    .stat .big{ font-size: 26px; font-weight: 950; margin-top: 6px; }
    .stat .sub{ font-size: 11px; color: var(--faint); margin-top: 2px; }

    .panel{
      margin-top: 16px;
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(8,12,28,.35);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .panel-head{
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .search{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
    input[type="text"]{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.20);
      color: var(--txt);
      padding: 10px 10px;
      outline:none;
      min-width: 220px;
      box-shadow: 0 18px 34px rgba(0,0,0,.40),
                  inset 0 1px 0 rgba(255,255,255,.10),
                  inset 0 -12px 18px rgba(0,0,0,.18);
    }

    .table-wrap{ overflow:auto; }
    table{
      width:100%;
      border-collapse: collapse;
      font-size: 13px;
      min-width: 780px;
    }
    th, td{
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      text-align:left;
      white-space: nowrap;
    }
    th{
      position: sticky; top:0;
      background: rgba(6,8,18,.75);
      backdrop-filter: blur(12px);
      color: rgba(255,255,255,.88);
      font-size: 11px;
      letter-spacing:.32px;
      text-transform: uppercase;
      z-index: 2;
    }
    tr:hover td{ background: rgba(255,255,255,.03); }
    .chip{
      font-size: 10px; font-weight: 950; letter-spacing:.35px; text-transform: uppercase;
      padding: 6px 10px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.90);
      display:inline-flex; align-items:center; gap:6px;
    }
    .chip.good{ background: rgba(34,197,94,.16); border-color: rgba(34,197,94,.26); }
    .chip.mid{ background: rgba(251,191,36,.14); border-color: rgba(251,191,36,.26); color: rgba(255,241,210,.95); }
    .chip.low{ background: rgba(255,43,214,.12); border-color: rgba(255,43,214,.22); }

    .mono{ color: var(--faint); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
    .muted{ color: var(--muted); }

    @media (max-width: 980px){ .stats{ grid-template-columns: 1fr 1fr; } }
    @media (max-width: 560px){
      .stats{ grid-template-columns: 1fr; }
      input[type="text"]{ min-width: 160px; }
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo"><span>ðŸ“Š</span></div>
        <div class="brand-text">
          <h1>Report stagione â€¢ Game Pass</h1>
          <div class="sub">Solo moderatori â€¢ Classifica + export CSV</div>
        </div>
      </div>

      <div class="actions">
        <span id="userInfo"></span>
        <a class="btnx" href="./moderation.html" style="text-decoration:none;">
  Moderation
</a>
        <button id="btnLogin" class="btnx primary">Login Google</button>
        <button id="btnLogout" class="btnx" style="display:none;">Logout</button>
      </div>
    </div>
  </div>

  <main class="wrap">
    <div id="status">Caricamentoâ€¦</div>

    <section class="stats" aria-label="stats">
      <div class="stat">
        <div class="lab">Season</div>
        <div class="big"><span id="statSeason">â€”</span></div>
        <div class="sub">config/gamepass.season</div>
      </div>
      <div class="stat">
        <div class="lab">Iscritti (con punti)</div>
        <div class="big"><span id="statPlayers">0</span></div>
        <div class="sub">utenti con progress</div>
      </div>
      <div class="stat">
        <div class="lab">XP max</div>
        <div class="big"><span id="statMaxXP">0</span></div>
        <div class="sub">top player</div>
      </div>
      <div class="stat">
        <div class="lab">Tier max</div>
        <div class="big"><span id="statMaxTier">0</span>/<span id="statTotalTiers">0</span></div>
        <div class="sub">basato su gp_tiers</div>
      </div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div class="search">
          <input id="q" type="text" placeholder="Cerca (email, nome, uid)â€¦" />
          <span class="muted" id="hint"></span>
        </div>
        <div class="search">
          <button id="btnReload" class="btnx">Ricarica</button>
          <button id="btnCSV" class="btnx primary">Export CSV</button>
        </div>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Nome</th>
              <th>Email</th>
              <th>UID</th>
              <th>XP</th>
              <th>Tier</th>
              <th>Prossima soglia</th>
              <th>Stato</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr><td colspan="8" class="muted">Caricamentoâ€¦</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <script type="module" src="./season_report.js"></script>
  </main>
</body>
</html>
