<!DOCTYPE html>
<html lang="it">
<head>
  <!-- ... (resto dell'head invariato) ... -->
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <div>
          <h1>Le carte FUT del canale Fantaballa!</h1>
          <div class="subtitle">Non hai ancora una carta? Segui le live su Tik Tok di Fanataballa!</div>
        </div>
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:8px;">
        <a class="pill" href="open-pack.html">üéÅ Apri un pacchetto</a>
        <button class="pill" id="quizBtn" type="button">üß† Modalit√† Quiz</button>
      </div>
      <!-- Tabs: Tutte / Preferite -->
      <!-- ... resto invariato ... -->
    </div>
  </header>

  <main class="wrap">
    <!-- ... -->
  </main>

  <!-- Modal Quiz -->
  <dialog id="quizModal">
    <form method="dialog" style="background:var(--panel); border-radius:var(--radius); padding:20px; max-width:500px; width:100%; color:var(--text);">
      <h2>üß† Modalit√† Quiz</h2>
      <div id="quizImage" style="width:100%; aspect-ratio:3/4; background:#000; overflow:hidden; margin:10px 0;"></div>
      <div id="quizOptions" style="display:grid; gap:8px;"></div>
      <div id="quizFeedback" style="margin-top:8px; font-weight:600;"></div>
      <div style="margin-top:12px; display:flex; gap:10px; justify-content:flex-end;">
        <span id="quizScore" style="flex:1; align-self:center;">Punteggio: 0</span>
        <button type="button" id="quizNext">Prossima</button>
        <button type="submit">Chiudi</button>
      </div>
    </form>
  </dialog>

  <!-- ... resto del markup esistente invariato ... -->

  <script>
    // ... codice esistente ...

    // ====== Quiz ======
    const quizBtn = document.getElementById('quizBtn');
    const quizModal = document.getElementById('quizModal');
    const quizImage = document.getElementById('quizImage');
    const quizOptions = document.getElementById('quizOptions');
    const quizFeedback = document.getElementById('quizFeedback');
    const quizScoreEl = document.getElementById('quizScore');
    const quizNext = document.getElementById('quizNext');

    let quizScore = 0;
    let quizCurrent = null;

    quizBtn.addEventListener('click', ()=>{
      quizScore = 0;
      quizScoreEl.textContent = `Punteggio: ${quizScore}`;
      nextQuiz();
      quizModal.showModal();
    });

    quizNext.addEventListener('click', ()=>{
      nextQuiz();
    });

    function nextQuiz(){
      if(!CARDS.length) return;
      const randomCard = CARDS[Math.floor(Math.random()*CARDS.length)];
      quizCurrent = randomCard;
      quizImage.innerHTML = `<img src="${randomCard.img}" alt="quiz" style="width:100%; height:100%; object-fit:cover; transform:scale(2); object-position:${Math.random()*100}% ${Math.random()*100}%">`;

      const options = [randomCard.name];
      while(options.length<4){
        const c = CARDS[Math.floor(Math.random()*CARDS.length)];
        if(!options.includes(c.name)) options.push(c.name);
      }
      options.sort(()=>Math.random()-0.5);
      quizOptions.innerHTML = '';
      quizFeedback.textContent = '';
      options.forEach(opt=>{
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = opt;
        btn.addEventListener('click', ()=>{
          if(opt === quizCurrent.name){
            quizFeedback.textContent = '‚úÖ Corretto!';
            quizScore++;
          }else{
            quizFeedback.textContent = `‚ùå Sbagliato! Era: ${quizCurrent.name}`;
          }
          quizScoreEl.textContent = `Punteggio: ${quizScore}`;
        });
        quizOptions.appendChild(btn);
      });
    }
  </script>
</body>
</html>
