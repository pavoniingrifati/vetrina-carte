<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Achievement ‚Äì Progetto F1</title>
<style>
    :root{
      --bg: #080a0f;
      --panel: #0e1220;
      --muted: #95a3bd;
      --text: #e9f0ff;
      --accent: #67b0ff;
      --accent-2: #ff2d87;
      --ring: 0 0 0 3px rgba(103,176,255,.35);
      /* Rarit√† */
      --comune: #2cff88;
      --raro: #4f8cff;
      --epico: #b65cff;
      --leggendario: #ffb020;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:radial-gradient(1200px 600px at 80% -10%, rgba(255,45,135,.15), transparent 60%), radial-gradient(900px 500px at 10% -20%, rgba(103,176,255,.18), transparent 60%), var(--bg);color:var(--text);position:relative;}
    /* scanlines / CRT (restano per vibe videogame) */
    body::before{content:'';position:fixed;inset:0;background:repeating-linear-gradient(to bottom, rgba(255,255,255,.06), rgba(255,255,255,.06) 1px, transparent 1px, transparent 3px);mix-blend-mode:overlay;pointer-events:none;opacity:.12}
    .container{max-width:1100px;margin-inline:auto;padding:24px}

    header{position:relative;border-radius:22px;padding:32px 28px;background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.0)), var(--panel);box-shadow:0 10px 30px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.03);overflow:hidden;border:2px solid transparent;background-clip:padding-box;border-radius:24px}
    header::after{content:'';position:absolute;inset:-2px;border-radius:24px;padding:2px;background:conic-gradient(from 180deg, var(--accent), var(--accent-2), var(--epico), var(--leggendario), var(--accent));-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite: xor;mask-composite: exclude;}

    .title{display:flex;align-items:center;gap:12px;font-size:clamp(22px,2.6vw,30px);font-weight:900;letter-spacing:.3px;text-transform:uppercase;text-shadow:0 3px 0 rgba(0,0,0,.35)}
    .subtitle{color:var(--muted);margin-top:10px;max-width:75ch;line-height:1.6}

    .hud{display:flex;flex-wrap:wrap;gap:10px;margin-top:16px}
    .chip{display:inline-flex;align-items:center;gap:8px;border:2px solid rgba(255,255,255,.12);padding:10px 12px;border-radius:12px;background:rgba(8,10,15,.6);backdrop-filter:blur(6px);font-size:12px;color:var(--muted);text-transform:uppercase}

    nav.tabs{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}
    .tab-btn{appearance:none;border:2px solid rgba(255,255,255,.12);background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:800;text-transform:uppercase;letter-spacing:.4px}
    .tab-btn[aria-pressed="true"]{background:linear-gradient(180deg, rgba(103,176,255,.25), rgba(103,176,255,.08));box-shadow:0 0 0 3px rgba(103,176,255,.15)}

    .levels{margin-top:18px;padding:14px;border:2px solid rgba(255,255,255,.12);border-radius:14px;background:rgba(255,255,255,.02)}
    .levels h4{margin:0 0 10px 0;text-transform:uppercase;letter-spacing:.4px}
    .levels .list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:8px;font-size:12px;color:var(--muted)}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-top:20px}
    .card{position:relative;background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));border:2px solid rgba(255,255,255,.12);border-radius:18px;padding:16px 14px 52px 14px;transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;overflow:hidden}
    .card::before{content:'';position:absolute;inset:-2px;z-index:0;border-radius:18px;background:radial-gradient(400px 120px at 50% -10%, rgba(255,255,255,.18), transparent 60%);opacity:.4;pointer-events:none}
    .card:hover{transform:translateY(-3px);border-color:rgba(255,255,255,.22);box-shadow:0 10px 30px rgba(0,0,0,.45)}

    .frame{position:absolute;inset:-2px;border-radius:18px;padding:2px;background:var(--frame, transparent);-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}

    .rarity{position:relative;z-index:1;display:flex;align-items:center;gap:8px;margin-bottom:10px;font-size:12px;color:var(--muted);text-transform:uppercase}
    .dot{width:10px;height:10px;border-radius:2px}
    .dot.comune{background:var(--comune)}
    .dot.raro{background:var(--raro)}
    .dot.epico{background:var(--epico)}
    .dot.leggendario{background:var(--leggendario)}

    .ach-title{position:relative;z-index:1;font-weight:900;line-height:1.25;margin:0 0 4px 0;text-transform:uppercase;letter-spacing:.4px}
    .meta{position:relative;z-index:1;font-size:12px;color:var(--muted)}

    .xp-pill{position:absolute;right:10px;top:10px;z-index:2;display:inline-flex;align-items:center;gap:6px;font-size:12px;font-weight:800;color:#06120b;background:linear-gradient(180deg, rgba(44,255,136,.9), rgba(44,255,136,.7));padding:6px 10px;border-radius:999px;box-shadow:0 6px 18px rgba(44,255,136,.35)}

    .toggle{position:absolute;right:10px;bottom:10px;z-index:2;appearance:none;border:2px solid rgba(255,255,255,.14);background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer;font-size:11px;font-weight:800;text-transform:uppercase}
    .toggle:focus{outline:none;box-shadow:var(--ring)}

    .card.unlocked{border-color:rgba(255,255,255,.35);box-shadow:0 0 0 2px rgba(255,255,255,.1), 0 20px 40px rgba(0,0,0,.5)}
    .card.unlocked::after{content:'‚úî Sbloccato';position:absolute;left:0;top:0;transform:translate(10px,10px) rotate(-2deg);background:linear-gradient(180deg, rgba(44,255,136,.9), rgba(44,255,136,.6));color:#06120b;font-weight:900;padding:6px 10px;border-radius:8px;box-shadow:0 6px 20px rgba(44,255,136,.35);font-size:11px;z-index:2}

    .card[data-rarity="comune"]{--frame: conic-gradient(from 180deg, rgba(44,255,136,.7), rgba(44,255,136,.15), transparent 40%)}
    .card[data-rarity="raro"]{--frame: conic-gradient(from 180deg, rgba(79,140,255,.7), rgba(79,140,255,.15), transparent 40%)}
    .card[data-rarity="epico"]{--frame: conic-gradient(from 180deg, rgba(182,92,255,.8), rgba(182,92,255,.15), transparent 40%)}
    .card[data-rarity="leggendario"]{--frame: conic-gradient(from 180deg, rgba(255,176,32,.9), rgba(255,176,32,.2), transparent 40%)}

    footer{opacity:.75;text-align:center;font-size:12px;margin:26px 0}

    .glow{position:absolute;inset:auto -20% -40% -20%;height:300px;background:radial-gradient(70% 60% at 50% 90%,rgba(79,140,255,.18),transparent 60%)}
  </style>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap" rel="stylesheet"/>
</head>
<body>
<h1>üèÜ Achievement Progetto F1</h1>
<nav aria-label="Filtri difficolt√†" class="tabs">
<button aria-pressed="true" class="tab-btn" data-filter="all">Tutti</button>
<button class="tab-btn" data-filter="comune">Comuni <span class="count" data-for="comune">(0)</span></button>
<button class="tab-btn" data-filter="raro">Rari <span class="count" data-for="raro">(0)</span></button>
<button class="tab-btn" data-filter="epico">Epici <span class="count" data-for="epico">(0)</span></button>
<button class="tab-btn" data-filter="leggendario">Leggendari <span class="count" data-for="leggendario">(0)</span></button>
</nav>
<div aria-label="Stato progressi" class="hud">
<div class="chip">Comuni: <strong id="prog-comune" style="margin-left:6px">0/0</strong></div>
<div class="chip">Rari: <strong id="prog-raro" style="margin-left:6px">0/0</strong></div>
<div class="chip">Epici: <strong id="prog-epico" style="margin-left:6px">0/0</strong></div>
<div class="chip">Leggendari: <strong id="prog-leggendario" style="margin-left:6px">0/0</strong></div>
<div class="chip">Totale: <strong id="prog-total" style="margin-left:6px">0/0</strong></div>
<div class="chip">XP sbloccata: <strong id="xp-total" style="margin-left:6px">0</strong></div>
</div>
<div class="chip">Rari: <strong id="prog-raro" style="margin-left:6px">0/0</strong></div>
<div class="chip">Epici: <strong id="prog-epico" style="margin-left:6px">0/0</strong></div>
<div class="chip">Leggendari: <strong id="prog-leggendario" style="margin-left:6px">0/0</strong></div>
<div class="chip">Totale: <strong id="prog-total" style="margin-left:6px">0/0</strong></div>

<section class="levels" id="levels">
<h4>XP necessaria per salire di livello</h4>
<div class="list" id="level-list"></div>
</section>
<section class="grid" id="achievements">
<!-- COMUNI -->
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Concludere una gara</h3>
<p class="meta">Termina la gara sotto la bandiera a scacchi.</p>
</article>
<!-- COMUNI -->
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Peggio di Stroll</h3>
<p class="meta">Acquisti una scuderia e guidi la macchina</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Rivale in casa</h3>
<p class="meta">Batti il tuo compagno di squadra in una gara</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Derby</h3>
<p class="meta">A fine stagione fai pi√π punti del tuo compagno</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Meglio di Stroll</h3>
<p class="meta">Acquisti una scuderia e vinci una gara</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Problemi Problemi!</h3>
<p class="meta">La tua macchina si ritira e fai partire in live il meme Problemi problemi! </p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">La maledizione</h3>
<p class="meta">Parti primo, secondo o terzo e la tua macchina inizia ad avere problemi tecnici al primo giro</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">C'√® ancora la gara</h3>
<p class="meta">Taglia il traguardo in una posizione migliore rispetto alla qualifica.</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">l mio lavoro qua √® finito</h3>
<p class="meta">Ritiro o incidente nel primo giro.</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Giro veloce, ma non basta</h3>
<p class="meta">Fai il giro veloce, ma non arrivi primo</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Causare un incidente</h3>
<p class="meta">Mandare ai pit un avversario. Decide il commissario di gara (Fantaballa).</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Rookie of the F3</h3>
<p class="meta">Pi√π punti tra i debuttanti in F3 a fine stagione.</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Sempre presenti</h3>
<p class="meta">Presenza in ogni appuntamento del campionato.</p>
</article>
<article class="card" data-rarity="comune">
<div class="rarity"><span class="dot comune"></span>Comune</div>
<h3 class="ach-title">Costanza in pista!</h3>
<p class="meta">Completare tutte le gare disputate in F2 o F3</p>
</article>
<!-- RARI -->
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Primooooo</h3>
<p class="meta">Taglia per primo il traguardo</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Pole Position!</h3>
<p class="meta">Partire dalla prima casella in griglia</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">La gara √® lunga</h3>
<p class="meta">Vittoria partendo da una posizione diversa dalla P1</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Grande occasione</h3>
<p class="meta">Sostituisci un pilota ufficiale e vinci la gara</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">La cenerentola dell'F1</h3>
<p class="meta">Vinci una gara con livello max di 81 in F1</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Fucsia!</h3>
<p class="meta">Registra il miglior tempo in gara.</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">MVP della gara</h3>
<p class="meta">Miglior pilota in gara. Assegnato dal commissario di gara.</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Rimonta immediata</h3>
<p class="meta">Essere primo al primo giro partendo da secondo o peggio
</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Gestire le gomme</h3>
<p class="meta">Vincere impostando aggressivit√† 1 
</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">A tutto gas!</h3>
<p class="meta">Vincere impostando aggressivit√† 100 
</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Manco il tempo di partire</h3>
<p class="meta">Ti ritiri prima della prima curva
</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Doppiato!</h3>
<p class="meta">Doppia un avversario
</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Bidonazzo</h3>
<p class="meta">Concludere 2 gare consecutive da ultimo 
</p>
</article>
 <article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Senza vergogna</h3>
<p class="meta">Fai ritirare un pilota avversario, ma tu concludi la gara
</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Ultra MVP</h3>
<p class="meta">Fai 3 MVP in una stagione</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Rimontona</h3>
<p class="meta">Sorpassa almeno 10 piloti.</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">Rookie of the F2</h3>
<p class="meta">Pi√π punti tra i debuttanti in F2 a fine stagione.</p>
</article>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">+15 secondi</h3>
<p class="meta">Vinci gara con 15 secondi sul secondo.</p>
</article>
<article class="card" data-rarity="raro">
<div class="rarity"><span class="dot raro"></span>Raro</div>
<h3 class="ach-title">+10 sec</h3>
<p class="meta">Vinci gara con 10 secondi sul secondo.</p>
</article>
<!-- EPICI -->
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Vincere un campionato</h3>
<p class="meta">Campione piloti di categoria.</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Mega rimonta</h3>
<p class="meta">Sorpassa almeno 15 piloti..</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Ogni buco √® trincea</h3>
<p class="meta">In una stagione partecipa ad una gara sia in F1, F2 ed F3</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">All'ultimo!</h3>
<p class="meta">Vincere la gara superando il primo all'ultimo giro</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Mondiale in faccia</h3>
<p class="meta">Vinci il mondiale davanti al tuo compagno di scuderia</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Madonna se sei scarso</h3>
<p class="meta">Due DNF di fila.</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Le qualifiche non sono il tuo forte</h3>
<p class="meta">Trionfo partendo dall'11¬™ posizione o peggio.</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Rookie of the F1</h3>
<p class="meta">Pi√π punti tra i debuttanti in F1 a fine stagione.</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Ultra Mega MVP</h3>
<p class="meta">Fai 3 Mvp di fila in stagione.</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Massacrato</h3>
<p class="meta">Doppia il tuo compagno di squadra</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Double</h3>
<p class="meta">Vinci campionato costruttori e piloti.</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">C'ho fretta</h3>
<p class="meta">Vincere il mondiale con una gara d'anticipo</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Hunger Games</h3>
<p class="meta">Arrivi al traguardo in una gara dove si finisce con massimo 5 piloti</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Hunger Games Campeon</h3>
<p class="meta">Vinci una gara dove si finisce con massimo 10 piloti</p>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">La Costanza ti premia</h3>
<p class="meta">Completare tutte le gare della stagione di F1.</p>
</article>
</article>
<article class="card" data-rarity="epico">
<div class="rarity"><span class="dot epico"></span>Epico</div>
<h3 class="ach-title">Errore madornale</h3>
<p class="meta">Ritirarsi all'ultimo giro</p>
</article>
<!-- LEGGENDARI -->
<article class="card" data-rarity="leggendario">
<div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
<h3 class="ach-title">Non √® ancora finita!</h3>
<p class="meta">Fare un incidente, ma tornare in pista e vincere la gara</p>
</article>
<article class="card" data-rarity="leggendario">
<div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
<h3 class="ach-title">Ingiocabile</h3>
<p class="meta">Sorpassa tutti i piloti in pista.</p>
</article>
<article class="card" data-rarity="leggendario">
<div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
<h3 class="ach-title">Leggendario back to back</h3>
<p class="meta">Partire ultimo e arrivare primo in gara</p>
</article>
<article class="card" data-rarity="leggendario">
<div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
<h3 class="ach-title">Qualifiche da incubo</h3>
<p class="meta">Ti qualifiche due volte di seguito ultimo.</p>
</article>
<article class="card" data-rarity="leggendario">
<div class="rarity"><span class="dot leggendario"></span>Leggendario</div>
<h3 class="ach-title">Fenomeno</h3>
<p class="meta">Vincere 2 mondiali consecutivi</p>
</article>
<article class="card" data-rarity="comune"><div class="rarity"><span class="dot comune"></span>Comune</div><h3 class="ach-title">Finire in top 10</h3><p class="meta">Tagliare il traguardo entro la decima posizione.</p></article><article class="card" data-rarity="comune"><div class="rarity"><span class="dot comune"></span>Comune</div><h3 class="ach-title">Punti al debutto in categoria</h3><p class="meta">Segnare punti alla prima gara nella nuova categoria.</p></article><article class="card" data-rarity="comune"><div class="rarity"><span class="dot comune"></span>Comune</div><h3 class="ach-title">Podio partendo fuori dalla top 10</h3><p class="meta">Salire sul podio partendo dall'11¬™ posizione o peggio.</p></article><article class="card" data-rarity="raro"><div class="rarity"><span class="dot raro"></span>Raro</div><h3 class="ach-title">Grand Chelem</h3><p class="meta">Pole + Vittoria + Giro Veloce + tutti i giri in testa.</p></article><article class="card" data-rarity="raro"><div class="rarity"><span class="dot raro"></span>Raro</div><h3 class="ach-title">3 podi consecutivi</h3><p class="meta">Ottenere 3 podi di fila.</p></article><article class="card" data-rarity="raro"><div class="rarity"><span class="dot raro"></span>Raro</div><h3 class="ach-title">Vincere una gara bagnata</h3><p class="meta">Trionfare in una gara disputata sul bagnato.</p></article><article class="card" data-rarity="raro"><div class="rarity"><span class="dot raro"></span>Raro</div><h3 class="ach-title">Vincere gara di casa</h3><p class="meta">Vittoria in un Gran Premio disputato in Italia.</p></article><article class="card" data-rarity="raro"><div class="rarity"><span class="dot raro"></span>Raro</div><h3 class="ach-title">Vincere gara cittadina</h3><p class="meta">Vittoria in un Gran Premio cittadino.</p></article><article class="card" data-rarity="raro"><div class="rarity"><span class="dot raro"></span>Raro</div><h3 class="ach-title">Partecipare a tutte le gare</h3><p class="meta">Presenza in ogni appuntamento del campionato.</p></article><article class="card" data-rarity="epico"><div class="rarity"><span class="dot epico"></span>Epico</div><h3 class="ach-title">2 pole consecutive</h3><p class="meta">Ottenere due Pole Position di fila.</p></article><article class="card" data-rarity="epico"><div class="rarity"><span class="dot epico"></span>Epico</div><h3 class="ach-title">3 vittorie consecutive</h3><p class="meta">Trionfare in tre gare di fila.</p></article><article class="card" data-rarity="epico"><div class="rarity"><span class="dot epico"></span>Epico</div><h3 class="ach-title">Giro veloce ma fuori dai primi 10 posti</h3><p class="meta">Registrare il giro veloce senza finire nei primi 10.</p></article><article class="card" data-rarity="epico"><div class="rarity"><span class="dot epico"></span>Epico</div><h3 class="ach-title">2 mondiali vinti consecutivamente</h3><p class="meta">Conquistare due mondiali di fila.</p></article></section>
<script>
    // === Configurazione XP ===
    const XP_REWARD = { comune: 60, raro: 150, epico: 350, leggendario: 600 };
    const xpToNext = (L)=>{ const d=L-80; return 400 + 20*d + 6*d*d; };

    // === Setup base ===
    const buttons = document.querySelectorAll('.tab-btn');
    const cards = [...document.querySelectorAll('.card')];
    const counts = {
      comune: document.querySelector('#prog-comune'),
      raro: document.querySelector('#prog-raro'),
      epico: document.querySelector('#prog-epico'),
      leggendario: document.querySelector('#prog-leggendario'),
      total: document.querySelector('#prog-total'),
      xptotal: document.querySelector('#xp-total')
    };

    // Aggiungi frame decorativo, pulsante toggle e XP pill ad ogni card
    cards.forEach(c=>{
      // frame
      if (!c.querySelector('.frame')){
        const f = document.createElement('div'); f.className='frame'; f.setAttribute('aria-hidden','true'); c.prepend(f);
      }
      // data-xp per rarit√†
      const r = c.dataset.rarity; c.dataset.xp = XP_REWARD[r] || 0;
      // xp pill visibile
      if (!c.querySelector('.xp-pill')){
        const pill = document.createElement('span'); pill.className='xp-pill'; pill.textContent = `+${c.dataset.xp} XP`; c.appendChild(pill);
      }
      // toggle
      if (!c.querySelector('.toggle')){
        const b = document.createElement('button'); b.className='toggle'; b.type='button'; b.textContent='Sblocca'; b.setAttribute('aria-label','Segna come sbloccato'); c.appendChild(b);
      }
    });

    // LocalStorage per sbloccati
    const storageKey = 'ach_unlocked_v2';
    const saved = JSON.parse(localStorage.getItem(storageKey) || '{}');

    function makeKey(card){
      const t = (card.querySelector('.ach-title')?.textContent || '').trim().toLowerCase();
      return t.replace(/[^a-z0-9]+/g,'-');
    }

    cards.forEach((c)=>{
      const key = makeKey(c);
      c.dataset.key = key;
      if (saved[key]) c.classList.add('unlocked');
      const btn = c.querySelector('.toggle');
      if (btn && saved[key]) btn.textContent = 'Blocca';
    });

    // Contatori + XP totale
    function updateCounters(){
      const rarities = ['comune','raro','epico','leggendario'];
      let totalUnlocked = 0; let total = cards.length; let xpUnlocked = 0;
      rarities.forEach(r=>{
        const list = cards.filter(c=>c.dataset.rarity===r);
        const unlocked = list.filter(c=>c.classList.contains('unlocked'));
        const span = document.querySelector(`.count[data-for="${r}"]`);
        if (span) span.textContent = `(${list.length})`;
        counts[r].textContent = `${unlocked.length}/${list.length}`;
        totalUnlocked += unlocked.length;
        xpUnlocked += unlocked.reduce((s,c)=> s + Number(c.dataset.xp||0), 0);
      });
      counts.total.textContent = `${totalUnlocked}/${total}`;
      counts.xptotal.textContent = xpUnlocked;
    }

    updateCounters();

    // Filtri
    buttons.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        buttons.forEach(b=>b.setAttribute('aria-pressed','false'));
        btn.setAttribute('aria-pressed','true');
        const f = btn.dataset.filter;
        cards.forEach(c=>{ c.style.display = (f==='all' || c.dataset.rarity===f) ? '' : 'none'; });
      });
    });

    // Toggle sblocco
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if (t.matches('.toggle')){
        const card = t.closest('.card');
        const key = card.dataset.key || makeKey(card);
        card.classList.toggle('unlocked');
        const isOn = card.classList.contains('unlocked');
        saved[key] = isOn;
        localStorage.setItem(storageKey, JSON.stringify(saved));
        t.textContent = isOn ? 'Blocca' : 'Sblocca';
        updateCounters();
      }
    });

    // Lista XP per livello 80‚Üí99
    const levelList = document.querySelector('#level-list');
    if (levelList){
      let frag = document.createDocumentFragment();
      for (let L=80; L<100; L++){
        const li = document.createElement('div');
        li.textContent = `L${L} ‚Üí L${L+1}: ${xpToNext(L)} XP`;
        frag.appendChild(li);
      }
      levelList.appendChild(frag);
    }
  </script>
</body>
</html>
